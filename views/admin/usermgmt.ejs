<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Management - Admin Panel</title>
    <link rel="stylesheet" href="/public/admin.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/public/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/public/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/public/favicon-16x16.png">
<link rel="manifest" href="/public/site.webmanifest">
  </head>
  <body>
    <header>
      <h1>User Management</h1>
      <div class="sidebar">
        <div class="sidebar-header">
          <img src="https://via.placeholder.com/150x150" alt="Logo">
        </div>
        <ul class="sidebar-nav">
          <li>
            <a href="admin-panel.html">Dashboard</a>
          </li>
          <li class="active-page">
            <a href="#">User Management</a>
          </li>
          <li>
            <a href="#">Team Management</a>
          </li>
          <li>
            <a href="#">Snippet Management</a>
          </li>
          <li>
            <a href="#">Audit Log</a>
          </li>
        </ul>
      </div>
    </header>
    <main>
        <div class="user-management-container">
          <h2>User List</h2>
          <div class="user-list-container">
            <div class="search-bar">
              <input type="text" placeholder="Search Users...">
              <button>Search</button>
            </div>
   <!-- users.ejs -->

<table id="user-list-table">
  <thead>
    <tr>
      <th>Username</th>
      <th>Email</th>
      <th>Last Login</th>
    </tr>
  </thead>
  <tbody>
    <% users.forEach(user => { %>
      <tr>
        <td><%= user.username %></td>
        <td><%= user.email %></td>
        <td><%= user.last_login %></td>
      </tr>
    <% }); %>
  </tbody>
</table>

            <script>
                const userListTable = document.querySelector('#user-list-table tbody');
          
                fetch('/api/users')
                  .then(response => response.json())
                  .then(users => {
                    userListTable.innerHTML = '';
                    users.forEach(user => {
                      const row = document.createElement('tr');
                      const username = document.createElement('td');
                      username.textContent = user.username;
                      row.appendChild(username);
                      const email = document.createElement('td');
                      email.textContent = user.email;
                      row.appendChild(email);
                      const lastLogin = document.createElement('td');
                      lastLogin.textContent = user.last_login;
                      row.appendChild(lastLogin);
                      userListTable.appendChild(row);
                    });
                  })
                  .catch(err => {
                    console.error(err);
                  });
              </script>
            <div class="pagination">
              <button>&lt;&lt;</button>
              <button>&lt;</button>
              <button>1</button>
              <button>2</button>
              <button>3</button>
              <button>&gt;</button>
              <button>&gt;&gt;</button>
            </div>
          </div>
        </div>
      </main>
    <script type="module" src="/src/user.js"></script>
    <script src="/src/app.js"></script>
    
  </body>
</html>
