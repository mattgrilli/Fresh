<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Management - Admin Panel</title>
    <link rel="stylesheet" href="/admin.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/public/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/public/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/public/favicon-16x16.png">
<link rel="manifest" href="/public/site.webmanifest">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<style>
  th {
    cursor: pointer;
  }
</style>

  </head>
  <body>
    <header>
      <h1>User Management</h1>
      <div class="sidebar">
        <div class="sidebar-header">
          <img src="https://via.placeholder.com/150x150" alt="Logo">
        </div>
        <ul class="sidebar-nav">
          <li>
            <a href="admin-panel">Dashboard</a>
          </li>
          <li class="active-page">
            <a href="#">User Management</a>
          </li>
          <li>
            <a href="#">Team Management</a>
          </li>
          <li>
            <a href="#">Snippet Management</a>
          </li>
          <li>
            <a href="#">Audit Log</a>
          </li>
        </ul>
      </div>
    </header>
    <main>
      <section class="generate-invitation-section">
        <h2>Generate Invitation Code</h2>
        <form id="generate-code-form" action="/admin/generate-code" method="POST">
          <button type="submit">Generate Code</button>
          <div id="generated-code"></div>
        </form>
      </section>

        <div class="user-management-container">
          <h2>User List</h2>
          <div class="user-list-container">
            <div class="search-bar">
              <input type="text" placeholder="Search Users...">
              <button>Search</button>
            </div>
   <!-- users.ejs -->
   <section id="user-management">
    <table id="userTable">
      <thead>
        <tr>
          <th>Username<span class="sort-indicator">&#x25B2;</span></th>
          <th>Email<span class="sort-indicator">&#x25B2;</span></th>
          <th>Last Login<span class="sort-indicator">&#x25B2;</span></th>
          <th>Role<span class="sort-indicator">&#x25B2;</span></th>
        </tr>
      </thead>
      <tbody>
        <% users.forEach(user => { %>
          <tr data-id="<%= user._id %>" class="user-row">
            <td><%= user.username %></td>
            <td><%= user.email %></td>
            <td><%= user.lastLogin ? user.lastLogin : 'N/A' %></td>
            <td><%= user.isAdmin ? 'Admin' : 'User' %></td>
          </tr>
        <% }); %>
      </tbody>
    </table>
  </section>
  


  <div class="pagination">
    <button data-page="first">&lt;&lt;</button>
    <button data-page="prev">&lt;</button>
    <button data-page="1">1</button>
    <button data-page="2">2</button>
    <button data-page="3">3</button>
    <button data-page="next">&gt;</button>
    <button data-page="last">&gt;&gt;</button>
  </div>
  <div class="results-info" id="results-info"></div>

          </div>
        </div>

      
      </main>
      <script src="/generateCode.js"></script>
      <script src="/admin-search.js"></script>
      <script src="/sort.js"></script>
      <script src="/modal.js"></script>
      <script src="/pagination.js"></script>
      <script src="/main.js"></script>
      

      
      
      
   
   <!-- User actions modal -->
<div id="user-actions-modal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>User Actions</h2>
    <input type="hidden" id="user-id">
    <div>
      <button id="reset-password">Reset Password</button>
    </div>
    <div>
      <button id="force-logout">Force Logout</button>
    </div>
    <div>
      <label for="new-role">New Role:</label>
      <select id="new-role">
        <option value="user">User</option>
        <option value="admin">Admin</option>
      </select>
      <button id="update-role">Update Role</button>
    </div>
  </div>
</div>


    
  </body>
</html>
